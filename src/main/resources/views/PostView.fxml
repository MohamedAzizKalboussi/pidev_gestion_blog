<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="Controllers.PostController"
            style="-fx-background-color: #f0f4f0;">

    <!-- NAV BAR: Dark with green accent -->
    <top>
        <HBox style="-fx-background-color: #1a1d27; -fx-padding: 12 24; -fx-border-color: #2d5a2d; -fx-border-width: 0 0 2 0;"
              alignment="CENTER_LEFT" spacing="16">
            <Label text="âœˆ Wanderlust"
                   style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #4caf50;"/>
            <Label text="/" style="-fx-text-fill: #555;"/>
            <Label text="Posts" style="-fx-font-size: 16px; -fx-text-fill: #aaa;"/>
            <HBox HBox.hgrow="ALWAYS"/>
            <Button fx:id="btnRetourCatalogue" text="â¬…  Catalogue" onAction="#retourCatalogue"
                    style="-fx-background-color: transparent; -fx-text-fill: #aaa; -fx-cursor: hand;
                           -fx-border-color: #444; -fx-border-radius: 6; -fx-background-radius: 6;
                           -fx-padding: 7 14; -fx-font-size: 13px;"/>
            <Button fx:id="btnNavComments" text="ðŸ’¬  Commentaires" onAction="#navigateToComments"
                    style="-fx-background-color: transparent; -fx-text-fill: #aaa; -fx-cursor: hand;
                           -fx-border-color: #444; -fx-border-radius: 6; -fx-background-radius: 6;
                           -fx-padding: 7 14; -fx-font-size: 13px;"/>
            <Button fx:id="btnNavReactions" text="â¤  RÃ©actions" onAction="#navigateToReactions"
                    style="-fx-background-color: transparent; -fx-text-fill: #aaa; -fx-cursor: hand;
                           -fx-border-color: #444; -fx-border-radius: 6; -fx-background-radius: 6;
                           -fx-padding: 7 14; -fx-font-size: 13px;"/>
            <Button fx:id="btnVoirPosts" text="ðŸ—‚  Vue Cartes" onAction="#voirPostsCards"
                    style="-fx-background-color: #4caf50; -fx-text-fill: white; -fx-cursor: hand;
                           -fx-background-radius: 6; -fx-padding: 7 14;
                           -fx-font-size: 13px; -fx-font-weight: bold;"/>
        </HBox>
    </top>

    <center>
        <HBox spacing="0">

            <!-- STATS SIDEBAR -->
            <VBox style="-fx-background-color: #1a1d27; -fx-pref-width: 210; -fx-padding: 24 16;
                         -fx-border-color: #2d5a2d; -fx-border-width: 0 2 0 0;" spacing="12">
                <Label text="STATISTIQUES"
                       style="-fx-font-size: 11px; -fx-font-weight: bold; -fx-text-fill: #4caf50;"/>

                <VBox style="-fx-background-color: #0f1117; -fx-background-radius: 10; -fx-padding: 16;" spacing="4">
                    <Label text="Total Posts" style="-fx-text-fill: #aaa; -fx-font-size: 12px;"/>
                    <Label fx:id="lblTotalPosts" text="0"
                           style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold;"/>
                </VBox>

                <VBox style="-fx-background-color: #0f1117; -fx-background-radius: 10; -fx-padding: 16;" spacing="4">
                    <HBox spacing="6" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #4caf50;"/>
                        <Label text="PubliÃ©s" style="-fx-text-fill: #aaa; -fx-font-size: 12px;"/>
                    </HBox>
                    <Label fx:id="lblPublies" text="0"
                           style="-fx-text-fill: #4caf50; -fx-font-size: 22px; -fx-font-weight: bold;"/>
                </VBox>

                <VBox style="-fx-background-color: #0f1117; -fx-background-radius: 10; -fx-padding: 16;" spacing="4">
                    <HBox spacing="6" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #ed8936;"/>
                        <Label text="Brouillons" style="-fx-text-fill: #aaa; -fx-font-size: 12px;"/>
                    </HBox>
                    <Label fx:id="lblBrouillons" text="0"
                           style="-fx-text-fill: #ed8936; -fx-font-size: 22px; -fx-font-weight: bold;"/>
                </VBox>

                <VBox style="-fx-background-color: #0f1117; -fx-background-radius: 10; -fx-padding: 16;" spacing="4">
                    <HBox spacing="6" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #718096;"/>
                        <Label text="ArchivÃ©s" style="-fx-text-fill: #aaa; -fx-font-size: 12px;"/>
                    </HBox>
                    <Label fx:id="lblArchives" text="0"
                           style="-fx-text-fill: #718096; -fx-font-size: 22px; -fx-font-weight: bold;"/>
                </VBox>
            </VBox>

            <!-- MAIN AREA -->
            <VBox HBox.hgrow="ALWAYS">

                <!-- SECTION 1: INPUT FORM (white card) -->
                <VBox style="-fx-background-color: white; -fx-padding: 24 28;
                             -fx-border-color: #e0e0e0; -fx-border-width: 0 0 1 0;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 8, 0, 0, 2);"
                      spacing="14">

                    <Label text="âœš  Nouveau Post"
                           style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1a1d27;"/>
                    <Label fx:id="lblValidation" text=""
                           style="-fx-font-size: 13px; -fx-font-weight: bold;"/>

                    <HBox spacing="20">
                        <!-- Content textarea -->
                        <VBox HBox.hgrow="ALWAYS" spacing="6">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="Contenu"
                                       style="-fx-text-fill: #333; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                                <HBox HBox.hgrow="ALWAYS"/>
                                <Label fx:id="lblCharCount" text="0/500"
                                       style="-fx-text-fill: #999; -fx-font-size: 12px;"/>
                            </HBox>
                            <TextArea fx:id="txtContenu"
                                      promptText="Partagez votre aventure..."
                                      prefHeight="110"
                                      style="-fx-background-color: #f8f9fa;
                                             -fx-text-fill: #111111;
                                             -fx-prompt-text-fill: #aaa;
                                             -fx-border-color: #d0d0d0;
                                             -fx-border-width: 1;
                                             -fx-border-radius: 8;
                                             -fx-background-radius: 8;
                                             -fx-padding: 12;
                                             -fx-font-size: 14px;"/>
                        </VBox>

                        <!-- Right controls -->
                        <VBox spacing="10" minWidth="300">
                            <Label text="Image (optionnel)"
                                   style="-fx-text-fill: #333; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                            <HBox spacing="8">
                                <TextField fx:id="txtMedia" promptText="Chemin de l'image..."
                                           HBox.hgrow="ALWAYS"
                                           style="-fx-background-color: #f8f9fa;
                                                  -fx-text-fill: #111111;
                                                  -fx-prompt-text-fill: #aaa;
                                                  -fx-border-color: #d0d0d0;
                                                  -fx-border-width: 1;
                                                  -fx-border-radius: 6;
                                                  -fx-background-radius: 6;
                                                  -fx-padding: 9 12;"/>
                                <Button fx:id="btnBrowseImage" text="ðŸ“" onAction="#browseImage"
                                        style="-fx-background-color: #e8f5e9; -fx-text-fill: #2d5a2d;
                                               -fx-cursor: hand; -fx-background-radius: 6;
                                               -fx-border-color: #4caf50; -fx-border-width: 1;
                                               -fx-border-radius: 6; -fx-padding: 9 14;"/>
                            </HBox>

                            <Label text="Statut"
                                   style="-fx-text-fill: #333; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                            <ComboBox fx:id="cbStatut" maxWidth="Infinity"
                                      style="-fx-background-color: #f8f9fa;
                                             -fx-border-color: #d0d0d0;
                                             -fx-border-width: 1;
                                             -fx-border-radius: 6;
                                             -fx-background-radius: 6;"/>

                            <HBox spacing="10" alignment="CENTER_RIGHT">
                                <Button fx:id="btnAnnuler" text="Annuler" onAction="#annuler"
                                        style="-fx-background-color: #f0f0f0; -fx-text-fill: #555;
                                               -fx-cursor: hand; -fx-background-radius: 6;
                                               -fx-border-color: #ccc; -fx-border-width: 1;
                                               -fx-border-radius: 6; -fx-padding: 9 20; -fx-font-size: 13px;"/>
                                <Button fx:id="btnModifier" text="âœ  Modifier" onAction="#modifierPost"
                                        style="-fx-background-color: #1565c0; -fx-text-fill: white;
                                               -fx-cursor: hand; -fx-background-radius: 6;
                                               -fx-padding: 9 20; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                                <Button fx:id="btnAjouter" text="âœš  Publier" onAction="#ajouterPost"
                                        style="-fx-background-color: #4caf50; -fx-text-fill: white;
                                               -fx-cursor: hand; -fx-background-radius: 6;
                                               -fx-padding: 9 20; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                            </HBox>
                        </VBox>
                    </HBox>
                </VBox>

                <!-- SECTION 2: TABLE -->
                <VBox VBox.vgrow="ALWAYS" style="-fx-background-color: #f0f4f0;">
                    <HBox style="-fx-padding: 14 28; -fx-background-color: white;
                                 -fx-border-color: #e0e0e0; -fx-border-width: 0 0 1 0;"
                          alignment="CENTER_LEFT" spacing="12">
                        <Label text="Tous les Posts"
                               style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #1a1d27;"/>
                        <HBox HBox.hgrow="ALWAYS"/>
                        <TextField fx:id="txtSearch" promptText="ðŸ”  Rechercher..."
                                   style="-fx-background-color: #f8f9fa;
                                          -fx-text-fill: #111;
                                          -fx-prompt-text-fill: #999;
                                          -fx-border-color: #d0d0d0;
                                          -fx-border-width: 1;
                                          -fx-border-radius: 20;
                                          -fx-background-radius: 20;
                                          -fx-padding: 8 16;
                                          -fx-pref-width: 220;"/>
                        <ComboBox fx:id="cbFilterStatut" promptText="Tous les statuts"
                                  style="-fx-background-color: #f8f9fa;
                                         -fx-border-color: #d0d0d0;
                                         -fx-border-width: 1;
                                         -fx-border-radius: 6;
                                         -fx-background-radius: 6;"/>
                    </HBox>

                    <TableView fx:id="tableView" VBox.vgrow="ALWAYS"
                               style="-fx-background-color: white;
                                      -fx-table-cell-border-color: #f0f0f0;
                                      -fx-control-inner-background: white;">
                        <columns>
                            <TableColumn fx:id="colId"      text="ID"              prefWidth="55"/>
                            <TableColumn fx:id="colContenu" text="Contenu"          prefWidth="340"/>
                            <TableColumn fx:id="colStatut"  text="Statut"           prefWidth="110"/>
                            <TableColumn fx:id="colMedia"   text="Media"            prefWidth="160"/>
                            <TableColumn fx:id="colDate"    text="Date de crÃ©ation" prefWidth="160"/>
                            <TableColumn fx:id="colActions" text="Actions"          prefWidth="290"/>
                        </columns>
                        <placeholder>
                            <Label text="Aucun post disponible"
                                   style="-fx-text-fill: #bbb; -fx-font-size: 16px;"/>
                        </placeholder>
                    </TableView>
                </VBox>

            </VBox>
        </HBox>
    </center>
</BorderPane>